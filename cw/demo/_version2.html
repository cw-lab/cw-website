<!DOCTYPE html>
<html lang="zh-Hant-TW">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta http-equiv="X-UA-Compatible" content="ie=edge">
	<title>文章頁 Demo</title>
	<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css">
	<style>
		body {
			min-width: 1440px;
		}
		img {
			display: block;
		}
		header {
			position: fixed;
			top: 0;
			left: 50%;
			width: 1440px;
			height: 61px;
			background-color: #fff;
			transform: translateX(-50%);
			z-index: 5;
		}
		header img {
			position: absolute;
			top: 0;
			left: 0;
			transition: opacity 0.3s;
		}
		header img,
		main .bg > img {
			width: 1440px;
		}
		header img.scroll,
		header.scroll_down img.normal,
		header.scroll_down.scroll img.scroll {
			opacity: 0;
		}
		header.scroll_down img.scroll,
		header.scroll_down.scroll img.normal {
			opacity: 1;
		}
		main {
			width: 1440px;
			padding-top: 61px;
			margin-left: auto;
			margin-right: auto;
		}
		main .bg {
			position: relative;
		}
		main .bg1 {
			z-index: 2;
		}
		main .bg2,
		main .bg3 {
			z-index: 1;
		}
		aside {
			position: absolute;
			top: 310px;
			right: calc( (100% - 1440px) / 2 + 83px );
		}
		.sns {
			position: absolute;
			top: 0;
			left: 234.5px;
		}
		.sns.bottomfixed {
			position: absolute;
			top: auto;
			bottom: 45px;
			left: 234.5px;
		}
		.sns.rightfixed {
			position: fixed;
			top: 96px;
			left: calc( (100% - 1440px) / 2 + 234.5px );
		}
	</style>
</head>
<body>
	<header>
		<img class="normal" src="v2/header.png" alt="正常版header">
		<img class="scroll" src="v2/headerscroll.png" alt="往上滑版header">
	</header>
	<main>
		<div class="bg bg1">
			<img src="v2/bg1.png" alt="文章1">
			<aside>
				<img src="v2/aside.png" width="153" alt="熱門文章">
			</aside>
		</div>
		<div class="bg bg2">
			<img src="v2/bg2.png" alt="文章2">
			<div class="sns">
				<img src="v2/share.png" width="44" alt="分享">
			</div>
		</div>
		<div class="bg bg3">
			<img src="v2/bg3.png" alt="文章3">
		</div>
	</main>
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
	<script>
		$(document).ready(function(){
			var width = $(window).width(),
				iScrollPos = 0;
			$(window).scroll(function() {
				// 往上滾動出現<header>
				var iCurScrollPos = $(this).scrollTop(),
					bg2Top = $('main .bg2').offset().top - 96,
					bg3Top = $('main .bg3').offset().top - 96 - 45 - $('.sns').outerHeight();
				// console.log(iCurScrollPos, bg2Top, bg3Top)
				if (iCurScrollPos >= 400) {
					$("header").addClass("scroll_down");
				} else {
					$("header").removeClass("scroll_down");
				}
				if ( (iCurScrollPos > bg2Top) && (iCurScrollPos < bg3Top) ) {
					$(".sns").addClass("rightfixed");
				} else {
					$(".sns").removeClass("rightfixed");
				}
				if ( iCurScrollPos >= bg3Top ) {
					$(".sns").addClass("bottomfixed");
				} else {
					$(".sns").removeClass("bottomfixed");
				}
				if (iCurScrollPos < iScrollPos) {
					$("header").addClass("scroll");
				} else {
					$("header").removeClass("scroll");
				}
				iScrollPos = iCurScrollPos;
				if ($("header").offset().top == 0) {
					$("header").removeClass("scroll");
				}
			});
		})
	</script>
</body>
</html>